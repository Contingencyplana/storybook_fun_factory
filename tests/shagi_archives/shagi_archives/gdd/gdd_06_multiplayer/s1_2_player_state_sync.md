<!-- Save to: shagi_archives/gdd/gdd_06_multiplayer/s1_2_player_state_sync.md -->

# ðŸ“˜ s1_2 â€“ Player State Sync  
*(Where Each Thread Knows Its Echo, and the Page Turns for Two)*

---

## ðŸ§  Purpose

This document defines how **player state synchronization** functions within Storybook's multiplayer recursion model.

In a shared world of books, lifts, and echoes, players must maintain:
- **Narrative continuity**
- **System coherence**
- **Poetic immersion**

Without constant updates or disruptive UI prompts, the game keeps players aligned **softly, symbolically, and structurally**.

---

## ðŸªž What Is â€œPlayer Stateâ€?

A player's **state** includes both systemic and symbolic information:

| State Type | Examples |
|------------|----------|
| ðŸ§  **Memory State** | Choices made, rooms visited, dreams invoked |
| ðŸ“– **Page Position** | Where the player is in the book â€” spatial and narrative placement |
| ðŸ§© **Inventory / Tools** | Items or ideas collected â€” keys, bookmarks, recursive artifacts |
| ðŸŒ€ **Recursion Status** | Solo, paired, twinned, or echo-linked |
| ðŸ–‹ï¸ **Codex and Stanza Logs** | Which systems, verses, or tools the player has unlocked or written |

All of these must **update locally**, **sync respectfully**, and **echo across lifts** â€” without disorienting the player.

---

## ðŸ”— Syncing Between Players

When players share recursion, state sync must feel **organic** and **lore-justified**:

| Sync Event | Description |
|------------|-------------|
| ðŸ” **Lift Arrival** | Both players arrive at the same stanza-room; their memory states sync gradually |
| ðŸ§­ **Codex Alignment** | Shared Codex entries reveal merged insights â€” differences become dialogue |
| ðŸ§³ **Echo Object Pickup** | Picking up a symbolic object may spawn echoes of it in another playerâ€™s inventory |
| ðŸ§  **Dream Drift** | Shared dreams may imprint partial memory overlays across playersâ€™ journals |

State sync is **soft by default** â€” systems attempt **alignment**, not enforcement.

---

## ðŸ”’ Privacy, Filters, and Echo Control

To protect agency, each player may adjust their visibility:

| Control | Purpose |
|---------|---------|
| ðŸ§³ **Inventory Sync Filter** | Choose which item types are shared (e.g., lore vs. tools) |
| ðŸ“œ **Codex Obfuscation** | Only share stanzas once player has invoked the matching verse |
| ðŸ§  **Memory Bloom Mode** | Share memory fragments abstractly â€” through visual motifs, not literal logs |
| ðŸ‘¤ **Anonymity Layers** | Player names, appearances, or presence may be partially or symbolically hidden |

This enables collaboration **without breaking the veil** of immersion or identity.

---

## ðŸ§  Recursion Respect Logic

State sync never overrides without consent. Instead, it uses **recursion respect logic**:

| Principle | Action |
|-----------|--------|
| ðŸªž **Echo Before Replace** | If a sync conflict occurs, create an echo log rather than overwrite |
| ðŸª¢ **Knotted States** | Parallel truths are stored â€” forked world states may coexist and be recombined |
| âœ¨ **Player Choice Primacy** | No automatic replacement of authored content (drawings, rooms, stanzas, etc.) |
| ðŸ“– **Narrative Drift Buffering** | Divergent states are reconciled slowly â€” pages shimmer before locking in |

This ensures **trust, continuity, and poetic fidelity**.

---

## ðŸ”® Future Expansion Points

| Feature | Purpose |
|---------|---------|
| `recursion_sync_diagnostics.md` | Visual tool showing how and when states have synced or diverged |
| `memory_echo_recorder.md` | Lets players review what changes were triggered by other players |
| `sync_conflict_resolver.md` | Handles poetic or structural conflicts between overlapping narrative actions |
| `dream_sync_weaver.md` | Enables synced dreaming between players â€” shared visions, puzzles, or flashback loops |

---

## ðŸ“˜ Final Doctrine

> No page turns alone.  
> No memory echoes in silence.  
> To share a lift is to share a thread â€”  
> And once two players share a stanza,  
> Their recursion must remember both.

The sync must feel like story.  
The update must feel like fate.
