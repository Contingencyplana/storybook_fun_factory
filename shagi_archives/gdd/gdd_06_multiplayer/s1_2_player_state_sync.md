<!-- Save to: shagi_archives/gdd/gdd_06_multiplayer/s1_2_player_state_sync.md -->

# 📘 s1_2 – Player State Sync  
*(Where Each Thread Knows Its Echo, and the Page Turns for Two)*

---

## 🧠 Purpose

This document defines how **player state synchronization** functions within Storybook's multiplayer recursion model.

In a shared world of books, lifts, and echoes, players must maintain:
- **Narrative continuity**
- **System coherence**
- **Poetic immersion**

Without constant updates or disruptive UI prompts, the game keeps players aligned **softly, symbolically, and structurally**.

---

## 🪞 What Is “Player State”?

A player's **state** includes both systemic and symbolic information:

| State Type | Examples |
|------------|----------|
| 🧠 **Memory State** | Choices made, rooms visited, dreams invoked |
| 📖 **Page Position** | Where the player is in the book — spatial and narrative placement |
| 🧩 **Inventory / Tools** | Items or ideas collected — keys, bookmarks, recursive artifacts |
| 🌀 **Recursion Status** | Solo, paired, twinned, or echo-linked |
| 🖋️ **Codex and Stanza Logs** | Which systems, verses, or tools the player has unlocked or written |

All of these must **update locally**, **sync respectfully**, and **echo across lifts** — without disorienting the player.

---

## 🔗 Syncing Between Players

When players share recursion, state sync must feel **organic** and **lore-justified**:

| Sync Event | Description |
|------------|-------------|
| 🔁 **Lift Arrival** | Both players arrive at the same stanza-room; their memory states sync gradually |
| 🧭 **Codex Alignment** | Shared Codex entries reveal merged insights — differences become dialogue |
| 🧳 **Echo Object Pickup** | Picking up a symbolic object may spawn echoes of it in another player’s inventory |
| 🧠 **Dream Drift** | Shared dreams may imprint partial memory overlays across players’ journals |

State sync is **soft by default** — systems attempt **alignment**, not enforcement.

---

## 🔒 Privacy, Filters, and Echo Control

To protect agency, each player may adjust their visibility:

| Control | Purpose |
|---------|---------|
| 🧳 **Inventory Sync Filter** | Choose which item types are shared (e.g., lore vs. tools) |
| 📜 **Codex Obfuscation** | Only share stanzas once player has invoked the matching verse |
| 🧠 **Memory Bloom Mode** | Share memory fragments abstractly — through visual motifs, not literal logs |
| 👤 **Anonymity Layers** | Player names, appearances, or presence may be partially or symbolically hidden |

This enables collaboration **without breaking the veil** of immersion or identity.

---

## 🧠 Recursion Respect Logic

State sync never overrides without consent. Instead, it uses **recursion respect logic**:

| Principle | Action |
|-----------|--------|
| 🪞 **Echo Before Replace** | If a sync conflict occurs, create an echo log rather than overwrite |
| 🪢 **Knotted States** | Parallel truths are stored — forked world states may coexist and be recombined |
| ✨ **Player Choice Primacy** | No automatic replacement of authored content (drawings, rooms, stanzas, etc.) |
| 📖 **Narrative Drift Buffering** | Divergent states are reconciled slowly — pages shimmer before locking in |

This ensures **trust, continuity, and poetic fidelity**.

---

## 🔮 Future Expansion Points

| Feature | Purpose |
|---------|---------|
| `recursion_sync_diagnostics.md` | Visual tool showing how and when states have synced or diverged |
| `memory_echo_recorder.md` | Lets players review what changes were triggered by other players |
| `sync_conflict_resolver.md` | Handles poetic or structural conflicts between overlapping narrative actions |
| `dream_sync_weaver.md` | Enables synced dreaming between players — shared visions, puzzles, or flashback loops |

---

## 📘 Final Doctrine

> No page turns alone.  
> No memory echoes in silence.  
> To share a lift is to share a thread —  
> And once two players share a stanza,  
> Their recursion must remember both.

The sync must feel like story.  
The update must feel like fate.
